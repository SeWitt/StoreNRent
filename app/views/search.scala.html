@(city: String)(spacesize: Double)(offers: List[Offer])(menubar: Html)

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Search</title>

		<!-- Bootstrap -->

		<link href="@routes.Assets.at("fonts/glyphicons-halflings-regular.svg")">
		<link href="@routes.Assets.at("stylesheets/bootstrap.min.css")" rel="stylesheet">
		<link href="@routes.Assets.at("stylesheets/slider.css")" rel="stylesheet">
		<link href="@routes.Assets.at("stylesheets/bootstrap-datetimepicker.min.css")" rel="stylesheet">
		<link href="@routes.Assets.at("stylesheets/bootstrap-spinedit.css")" rel="stylesheet">

		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script type="text/javascript" src="@routes.Assets.at("javascripts/jquery-2.1.1.min.js")"></script>
		<script type="text/javascript" src="@routes.Assets.at("javascripts/bootstrap.min.js")"></script>
		<script type="text/javascript" src="@routes.Assets.at("javascripts/bootstrap-slider.js")"></script>
		<script type="text/javascript" src="@routes.Assets.at("javascripts/bootstrap-datetimepicker.min.js")" ></script>
		<script type="text/javascript" src="@routes.Assets.at("javascripts/bootstrap-spinedit.js")" ></script>

		<script src="@controllers.routes.Application.jsRoutes()" type="text/javascript"></script>

		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->

	</head>
	<body >

			@menubar
		<div class="title" style="text-align:center">
			<h1>Look for offers</h1>
		</div>
		<hr>

		<section class="row">

			<!-- begin of map-->
			<div class="col-md-6" style="padding-right: 25px; padding-left: 20px">
				<div class="row">
					<div class="panel panel-default" style="center">
						<div class="panel-heading" style="text-align:center">
							Map
						</div>
						<div class="panel-body">
							<br>
							<div id="map-container" style="min-height: 300px; max-height: 500px;"> </div>
						</div>
					</div>
				</div>
			</div>

			<!-- End of container -->

			<!-- end of map -->

			<div class="col-md-6" style="padding-left: 25px; padding-right: 20px">

				<div class="row">
					<div id="searchWarning" >
						<div class="alert alert-warning">
							Please enter a city and postcode!
						</div>
					</div>
				</div>

				<div class="panel panel-default" style="center">
					<div class="panel-heading" style="text-align:center">
						Pricing, Rental Time
					</div>
					<div class="panel-body">
						<div class="row">

						<div>
							<div class="row">

								<script>
									$("#searchWarning").hide();
								</script>
								<div class ="" style="text-align:center">
									<h2> Location</h2>
								</div>
								<div class="col col-md-3">
									@if(city != null){
										<input id="city" class="form-control" type="text" value= "@city" autofocus="" placeholder="City" >
									}else{
										<input id="city" class="form-control" type="text" autofocus="" placeholder="City" >
									}
									
								</div>
								<div class="col col-md-3">
									<input id="postcode" class="form-control" type="text" placeholder="Postcode" >
								</div>
								<div class="col col-md-4">

									<div id="radius" class="input-group">
										<span class="input-group-addon">search area:</span>
										<input id="radiusinput" class="form-control" type="number" name="circuit" min="1" value="5" max="100" step="0.5">
										<span class="input-group-addon">km</span>
									</div>
								</div>
							</div>
							<hr>
							<div class="row">
								<div style="text-align:center">
									<h2>Space</h2>
								</div>
								<div class="col col-md-4">
									<div id="spacesize" class="input-group">
										<span class="input-group-addon">size:</span>
										@if(spacesize !=null){
											<input id="spacesizeinput" class="form-control" type="number" value="@spacesize" name="size" min="1" value="5" max="100" step="0.5">
										}else{
											<input id="spacesizeinput" class="form-control" type="number" name="size" min="1" value="5" max="100" step="0.5">
										}
										
										<span class="input-group-addon">m²</span>
									</div>
								</div>
							</div>
							<br>
							<div class="row">

								<div class="col-md-4">

									<div id="dtpfrom" class="input-append date">
										<div class="input-group">
											<span class="input-group-addon">From:</span>
											<input id="dtpfrominput" class="form-control" type="text">
											<span class="input-group-addon"><span class="add-on" style="cursor: pointer;"> <span class="glyphicon glyphicon-calendar" > </span> </span></span>

										</div>
									</div>

									<script type="text/javascript">
										$(function() {
											$('#dtpfrom').datetimepicker({
												format : 'dd-.MM-yyyy',
												language : 'pt-BR'
											});
										});
									</script>
								</div>
								<div class="col-md-4 col-md-offset-1">
									<div id="dtpto" class="input-append date">
										<div class="input-group">
											<span class="input-group-addon">To:</span>
											<input id="dtptoinput" class="form-control"  type="text">
											<span class="input-group-addon"><span class="add-on" style="cursor: pointer;"> <span class="glyphicon glyphicon-calendar" > </span> </span></span>
										</div>
									</div>

									<script type="text/javascript">
										$(function() {
											$('#dtpto').datetimepicker({
												format : 'dd-MM-yyyy',
												language : 'pt-BR'
											});
										});
									</script>
								</div>

							</div>
							<hr>
							<div class="row">

								<div class ="" style="text-align:center">
									<h2>Pricing</h2>

									Max price:
									<b> 0 </b>
									<div  class="slider slider-horizontal" style="width: 200px;">

										<div class="slider-track"></div>
										<div class="tooltip top" style="top: -40px; left: 79.5px;"></div>
										<input id="maxPrice" class="span2" type="text" style="" >

									</div>
									<b> 100 € </b>
									<script type="text/javascript">
										$(function() {
											$('#maxPrice').slider({
												min : '0',
												step : '1',
												max : '100'
											});
										});
									</script>
								</div>
							</div>

							<hr>
							<button id="search" class="btn btn-default" style="vertical-align: top; float: right" type="button" >
								Search
							</button>
						</div>
					</div>
						
					</div>
				</div>
			</div>

			
		</section>
		<!-- end search input -->
		<hr>
		<div style="text-align:center">
			<h1 > Search results </h1>
		</div>
		<!-- begin search results-->
		<div>
			<section class="row">
				<div id ="resultContainer">
					<div id="searchResults" style="text-align:center">
						@if(offers != null){
						<table id="resultTable"   class="table table-striped">

							<thead>
								<tr>
									<th style="text-align:center"> Picture </th>
									<th style="text-align:center"> Description </th>
									<th style="text-align:center"> Timeslot </th>
									<th style="text-align:center"> Distance </th>
									<th style="text-align:center"> Price (&euro; / per day) </th>
								</tr>
							</thead>
							<tbody>

								@for(offer <- offers){
								<tr style="text-align:center">
									@if(offer.picture == null ) {
									<td style="text-align:center"><img height="60" width="80" src="@routes.Assets.at("images/defaultPicture.png")"  /></td>
									}else{
									picture to be placed here...
									}
									<td ><a href="@routes.OfferController.index(offer.id)"> @offer.description </a></td>
									<td >@offer.offerFrom - @offer.offerTo </td>
									<td > about x km away </td>
									<td > @offer.price </td>
								</tr>
								<br>
								}
							</tbody>
						</table>
						}else{
						<tr style="text-align:center">

							<h3>nothing to display!</h3>

						</tr>
						}

					</div>
				</div>
			</section>
		</div>

		<!--	//===================================SCRIPTS============================================================================================== -->
		<script>
			$('#search').click(function() {
				var fromDate = $('#dtpfrominput').val();
				var toDate = $('#dtptoinput').val();
				var city = $('#city').val();
				var postCode = $('#postcode').val();
				var spaceSize = $('#spacesizeinput').val();
				var maxPrice = $('#maxPrice').val();
				var radius = $('#radiusinput').val();
				//has to be computed with the help of google...
				var lng = null;
				var lat = null;

				// validation
				if (fromDate.length <= 4) {
					fromDate = null;
				}

				if (toDate.length <= 4) {
					toDate = null;
				}

				if (city.length <= 4) {
					city = null;
				}

				if (postCode.length <= 4) {
					postCode = null;
				}

				if ($('#spacesizeinput').value == '' || $('#spacesizeinput').value == $('#spacesizeinput').defaultValue) {
					spaceSize = null;
				}

				if ($('#maxPrice').value == '' || $('#maxPrice').value == $('#maxPrice').defaultValue) {
					maxPrice = null;
				}

				if ($('#radiusinput').value == '' || $('#radiusinput').value == $('#radiusinput').defaultValue) {
					raidus = null;
				}

				if (city == null && postCode == null) {
					$("#searchWarning").show();

				} else {
					$("#searchWarning").hide();
					appRoutes.controllers.SearchController.query(fromDate, toDate, city, postCode, spaceSize, maxPrice, radius).ajax({
						data : 'html',
						contentType : 'html',
						success : function(data) {

							$("#searchResults").remove();

							$("#resultContainer").append(data);

						}
					});
				}

			});

		</script>

	</body>
</html>